<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Alchemy: OnlineEngine Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>OnlineEngine Class Reference</h1><!-- doxytag: class="OnlineEngine" -->Engine for performing inference and learning online.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="onlineengine_8h-source.html">onlineengine.h</a>&gt;</code>
<p>
<a href="classOnlineEngine-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOnlineEngine.html#43f1e0f9d6032a4b4efe9607810c2c2e">OnlineEngine</a> (const string &amp;inferString)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructs an <a class="el" href="classOnlineEngine.html">OnlineEngine</a> from a string of inference options.  <a href="#43f1e0f9d6032a4b4efe9607810c2c2e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOnlineEngine.html#34c7403d8e16ff2acb377c31169ebbc1">OnlineEngine</a> (<a class="el" href="classInference.html">Inference</a> *inference)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructs an <a class="el" href="classOnlineEngine.html">OnlineEngine</a> from an <a class="el" href="classInference.html">Inference</a> object.  <a href="#34c7403d8e16ff2acb377c31169ebbc1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="477cde74579710890ce88c7a2da142e4"></a><!-- doxytag: member="OnlineEngine::~OnlineEngine" ref="477cde74579710890ce88c7a2da142e4" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOnlineEngine.html#477cde74579710890ce88c7a2da142e4">~OnlineEngine</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys the <a class="el" href="classInference.html">Inference</a> pointer associated with this <a class="el" href="classOnlineEngine.html">OnlineEngine</a>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a9f2709dbaa3ab9a6b981f4908302e75"></a><!-- doxytag: member="OnlineEngine::init" ref="a9f2709dbaa3ab9a6b981f4908302e75" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOnlineEngine.html#a9f2709dbaa3ab9a6b981f4908302e75">init</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the underlying inference procedure. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOnlineEngine.html#164d41ff80e2e9bc68333166d59e5ca2">infer</a> (vector&lt; string &gt; &amp;nonZeroAtoms, vector&lt; float &gt; &amp;probs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform inference given the current evidence and queries.  <a href="#164d41ff80e2e9bc68333166d59e5ca2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOnlineEngine.html#ccb4dc7f91896cbe679e67ca075b6d23">addTrueEvidence</a> (const vector&lt; string &gt; &amp;evidence)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add true evidence to the underlying state.  <a href="#ccb4dc7f91896cbe679e67ca075b6d23"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOnlineEngine.html#346644d56d9c2793b3daf86913cc35f0">addFalseEvidence</a> (const vector&lt; string &gt; &amp;evidence)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add false evidence to the underlying state.  <a href="#346644d56d9c2793b3daf86913cc35f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOnlineEngine.html#e6e3f83163923255369e16e025037fc4">removeEvidence</a> (const vector&lt; string &gt; &amp;oldEvidence)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove evidence from the underlying state.  <a href="#e6e3f83163923255369e16e025037fc4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOnlineEngine.html#69221ff642d59be28b174efa93376dad">setInference</a> (<a class="el" href="classInference.html">Inference</a> *inference)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the inference procedure for this <a class="el" href="classOnlineEngine.html">OnlineEngine</a>.  <a href="#69221ff642d59be28b174efa93376dad"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOnlineEngine.html#ddf1e8f9489f4e1b7215e7bab0db798b">setMaxInferenceSteps</a> (const int &amp;inferenceSteps)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the max number of steps for the inference procedure if using <a class="el" href="classMaxWalkSat.html">MaxWalkSat</a>.  <a href="#ddf1e8f9489f4e1b7215e7bab0db798b"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Engine for performing inference and learning online. 
<p>
This class is designed to be used with an external agent which initializes the engine with an mln, evidence predicates, a set of queries and parameters for the inference procedure as a string in the same form used by the infer executable. The agent then sends the engine changes in evidence and asks the engine to perform inference and/or learning. 
<p>

<p>
Definition at line <a class="el" href="onlineengine_8h-source.html#l00268">268</a> of file <a class="el" href="onlineengine_8h-source.html">onlineengine.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="43f1e0f9d6032a4b4efe9607810c2c2e"></a><!-- doxytag: member="OnlineEngine::OnlineEngine" ref="43f1e0f9d6032a4b4efe9607810c2c2e" args="(const string &amp;inferString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OnlineEngine::OnlineEngine           </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>inferString</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructs an <a class="el" href="classOnlineEngine.html">OnlineEngine</a> from a string of inference options. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inferString</em>&nbsp;</td><td>string containing parameters for the inference procedure. The form is identical to that given to the infer executable. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="onlineengine_8h-source.html#l00278">278</a> of file <a class="el" href="onlineengine_8h-source.html">onlineengine.h</a>.
<p>
References <a class="el" href="onlineengine_8h-source.html#l00369">setInference()</a>.<div class="fragment"><pre class="fragment"><a name="l00279"></a>00279   {
<a name="l00280"></a>00280     <a class="code" href="classInference.html">Inference</a>* inference = NULL;
<a name="l00281"></a>00281     parseInferString(inferString, inference);
<a name="l00282"></a>00282     <a class="code" href="classOnlineEngine.html#69221ff642d59be28b174efa93376dad">setInference</a>(inference);
<a name="l00283"></a>00283   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="34c7403d8e16ff2acb377c31169ebbc1"></a><!-- doxytag: member="OnlineEngine::OnlineEngine" ref="34c7403d8e16ff2acb377c31169ebbc1" args="(Inference *inference)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OnlineEngine::OnlineEngine           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInference.html">Inference</a> *&nbsp;</td>
          <td class="paramname"> <em>inference</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructs an <a class="el" href="classOnlineEngine.html">OnlineEngine</a> from an <a class="el" href="classInference.html">Inference</a> object. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inference</em>&nbsp;</td><td><a class="el" href="classInference.html">Inference</a> used in the <a class="el" href="classOnlineEngine.html">OnlineEngine</a> </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="onlineengine_8h-source.html#l00290">290</a> of file <a class="el" href="onlineengine_8h-source.html">onlineengine.h</a>.
<p>
References <a class="el" href="onlineengine_8h-source.html#l00369">setInference()</a>.<div class="fragment"><pre class="fragment"><a name="l00291"></a>00291   {
<a name="l00292"></a>00292     <a class="code" href="classOnlineEngine.html#69221ff642d59be28b174efa93376dad">setInference</a>(inference);
<a name="l00293"></a>00293   }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="164d41ff80e2e9bc68333166d59e5ca2"></a><!-- doxytag: member="OnlineEngine::infer" ref="164d41ff80e2e9bc68333166d59e5ca2" args="(vector&lt; string &gt; &amp;nonZeroAtoms, vector&lt; float &gt; &amp;probs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OnlineEngine::infer           </td>
          <td>(</td>
          <td class="paramtype">vector&lt; string &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>nonZeroAtoms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; float &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>probs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Perform inference given the current evidence and queries. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nonZeroAtoms</em>&nbsp;</td><td>For MAP inference, this contains the query atoms inferred to be true; for prob. inference, this contains the query atoms with non-zero probability. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>probs</em>&nbsp;</td><td>For MAP inference, this is a vector of ones; for prob. inference, this contains the probabilities corresponding to the atoms in trueAtoms. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="onlineengine_8h-source.html#l00321">321</a> of file <a class="el" href="onlineengine_8h-source.html">onlineengine.h</a>.
<p>
References <a class="el" href="classInference.html#82780a246832559ada6bb8caa416f001">Inference::getPredsWithNonZeroProb()</a>, and <a class="el" href="classInference.html#0c76197bab60ce99b6c6641e28430249">Inference::infer()</a>.<div class="fragment"><pre class="fragment"><a name="l00322"></a>00322   {
<a name="l00323"></a>00323     nonZeroAtoms.clear();
<a name="l00324"></a>00324     probs.clear();
<a name="l00325"></a>00325     inference_-&gt;<a class="code" href="classInference.html#0c76197bab60ce99b6c6641e28430249">infer</a>();
<a name="l00326"></a>00326       <span class="comment">// Fill in vectors</span>
<a name="l00327"></a>00327     inference_-&gt;<a class="code" href="classInference.html#82780a246832559ada6bb8caa416f001">getPredsWithNonZeroProb</a>(nonZeroAtoms, probs);
<a name="l00328"></a>00328     assert(nonZeroAtoms.size() == probs.size());
<a name="l00329"></a>00329   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ccb4dc7f91896cbe679e67ca075b6d23"></a><!-- doxytag: member="OnlineEngine::addTrueEvidence" ref="ccb4dc7f91896cbe679e67ca075b6d23" args="(const vector&lt; string &gt; &amp;evidence)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OnlineEngine::addTrueEvidence           </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>evidence</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add true evidence to the underlying state. 
<p>
The given atoms are marked as true evidence in the database.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>evidence</em>&nbsp;</td><td>Atoms, in string form, to be added to the evidence. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="onlineengine_8h-source.html#l00337">337</a> of file <a class="el" href="onlineengine_8h-source.html">onlineengine.h</a>.<div class="fragment"><pre class="fragment"><a name="l00338"></a>00338   {
<a name="l00339"></a>00339     addRemoveEvidenceHelper(evidence, <span class="keyword">true</span>, <span class="keyword">true</span>);
<a name="l00340"></a>00340   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="346644d56d9c2793b3daf86913cc35f0"></a><!-- doxytag: member="OnlineEngine::addFalseEvidence" ref="346644d56d9c2793b3daf86913cc35f0" args="(const vector&lt; string &gt; &amp;evidence)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OnlineEngine::addFalseEvidence           </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>evidence</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add false evidence to the underlying state. 
<p>
The given atoms are marked as false evidence in the database.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>evidence</em>&nbsp;</td><td>Atoms, in string form, to be added to the evidence. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="onlineengine_8h-source.html#l00348">348</a> of file <a class="el" href="onlineengine_8h-source.html">onlineengine.h</a>.<div class="fragment"><pre class="fragment"><a name="l00349"></a>00349   {
<a name="l00350"></a>00350     addRemoveEvidenceHelper(evidence, <span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l00351"></a>00351   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e6e3f83163923255369e16e025037fc4"></a><!-- doxytag: member="OnlineEngine::removeEvidence" ref="e6e3f83163923255369e16e025037fc4" args="(const vector&lt; string &gt; &amp;oldEvidence)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OnlineEngine::removeEvidence           </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>oldEvidence</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove evidence from the underlying state. 
<p>
The given atoms are marked as unknown in the database.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>oldEvidence</em>&nbsp;</td><td>Atoms, in string form, to be removed from the evidence. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="onlineengine_8h-source.html#l00359">359</a> of file <a class="el" href="onlineengine_8h-source.html">onlineengine.h</a>.<div class="fragment"><pre class="fragment"><a name="l00360"></a>00360   {
<a name="l00361"></a>00361     addRemoveEvidenceHelper(oldEvidence, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l00362"></a>00362   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="69221ff642d59be28b174efa93376dad"></a><!-- doxytag: member="OnlineEngine::setInference" ref="69221ff642d59be28b174efa93376dad" args="(Inference *inference)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OnlineEngine::setInference           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInference.html">Inference</a> *&nbsp;</td>
          <td class="paramname"> <em>inference</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the inference procedure for this <a class="el" href="classOnlineEngine.html">OnlineEngine</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inference</em>&nbsp;</td><td><a class="el" href="classInference.html">Inference</a> procedure for this <a class="el" href="classOnlineEngine.html">OnlineEngine</a>. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="onlineengine_8h-source.html#l00369">369</a> of file <a class="el" href="onlineengine_8h-source.html">onlineengine.h</a>.
<p>
Referenced by <a class="el" href="onlineengine_8h-source.html#l00278">OnlineEngine()</a>.<div class="fragment"><pre class="fragment"><a name="l00370"></a>00370   {
<a name="l00371"></a>00371     inference_ = inference;
<a name="l00372"></a>00372   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ddf1e8f9489f4e1b7215e7bab0db798b"></a><!-- doxytag: member="OnlineEngine::setMaxInferenceSteps" ref="ddf1e8f9489f4e1b7215e7bab0db798b" args="(const int &amp;inferenceSteps)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OnlineEngine::setMaxInferenceSteps           </td>
          <td>(</td>
          <td class="paramtype">const int &amp;&nbsp;</td>
          <td class="paramname"> <em>inferenceSteps</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the max number of steps for the inference procedure if using <a class="el" href="classMaxWalkSat.html">MaxWalkSat</a>. 
<p>
It is typical to set the number of steps to a lower value after the first step.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inferenceSteps</em>&nbsp;</td><td>Number of maximum steps <a class="el" href="classMaxWalkSat.html">MaxWalkSat</a> should perform. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="onlineengine_8h-source.html#l00381">381</a> of file <a class="el" href="onlineengine_8h-source.html">onlineengine.h</a>.<div class="fragment"><pre class="fragment"><a name="l00382"></a>00382   {
<a name="l00383"></a>00383       <span class="comment">// Check if using MWS</span>
<a name="l00384"></a>00384     <span class="keywordflow">if</span> (<a class="code" href="classMaxWalkSat.html">MaxWalkSat</a>* mws = dynamic_cast&lt;MaxWalkSat*&gt;(inference_))
<a name="l00385"></a>00385     {
<a name="l00386"></a>00386       mws-&gt;setMaxSteps(inferenceSteps);
<a name="l00387"></a>00387     }    
<a name="l00388"></a>00388   }
</pre></div>
<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/online/<a class="el" href="onlineengine_8h-source.html">onlineengine.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Feb 14 15:15:21 2007 for Alchemy by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
